(()=>{var r=null,i=new TextDecoder,n="",o=null;function l(e){self.postMessage({type:"result",result:e,uid:o})}function c(e){return new Promise(t=>{for(;;)try{if(l(JSON.parse(e.pop())),!e.length)break}catch(s){console.error(s)}t()})}async function d({done:e,value:t}){if(e){if(n.length){let s=n.split(`
`);await c(s)}}else{n+=i.decode(t);let a=n.split(`
`);n=a.pop(),a.length&&await c(a)}return e}async function u(e){r=e.getReader();let t=!1;for(;!t;){let s=await r.read();t=await d(s)}}async function f(e){let t=await fetch(e,{method:"GET",credentials:"include",headers:new Headers({Accept:"application/x-ndjson"})});t.ok?(await u(t.body),self.postMessage({type:"done",uid:o})):(console.error(`${t.status}: ${t.statusText}`),self.postMessage({type:"error",uid:o}))}self.onmessage=e=>{let{url:t,uid:s}=e.data;o=s,f(t)};})();