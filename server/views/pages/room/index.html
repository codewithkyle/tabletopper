<tool-bar
    x-data="{ open: '' }"
    x-on:keydown.escape.window="open = ''"
    x-on:click.outside="open = ''"
>
    <button 
        sfx="button" 
        hx-get="/stub/toolbar/room"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'room';"
        :class="{ 'active': open === 'room' }"
    >Room</button>
    <button 
        sfx="button" 
        hx-get="/stub/toolbar/tabletop"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'tabletop';"
        :class="{ 'active': open === 'tabletop' }"
    >Tabletop</button>
    <button
        sfx="button" 
        hx-get="/stub/toolbar/initiative"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'initiative';"
        :class="{ 'active': open === 'initiative' }"
    >Initiative</button>
    <button
        sfx="button" 
        hx-get="/stub/toolbar/view"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'view';"
        :class="{ 'active': open === 'view' }"
    >View</button>
    <button 
        sfx="button"
        hx-get="/stub/toolbar/window"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'window';"
        :class="{ 'active': open === 'window' }"
    >Window</button>
    <button
        sfx="button" 
        hx-get="/stub/toolbar/help"
        hx-target="tool-bar-menu .menu"
        x-on:click.stop="$dispatch('open', { left: $event.target.getBoundingClientRect().left }); open = 'help';"
        :class="{ 'active': open === 'help' }"
    >Help</button>
</tool-bar>
<tabletop-page></tabletop-page>
<tool-bar-menu
    x-data="{ open: false, left: 0 }"
    x-on:open.window="open = true; left = $event.detail.left;"
    x-show="open"
    x-on:keydown.escape.window="open = false"
>
    <div 
        class="menu"
        x-on:click.outside="open = false"
        :style="{ transform: 'translateX(' + left + 'px)' }"
    ></div>
</tool-bar-menu>
